<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!-- Simulation definition -->
<simulation world-size="640um 400um" dt="13ms" background="white">

    <!-- Activation threshold -->
    <parameter name="T" value="1nM" />

    <!-- Define streamlines -->
    <module name="streamlines" grid="320 200" inlet-velocity="200um/s" layout="barrier outlet barrier inlet"/>
    <module name="diffusion-streamlines" />

    <plugin name="obstacles-image" image="demo.png" />

    <!-- Define diffusion module -->
    <module name="diffusion" grid="320 200">
        <signal name="GFP" diffusion-rate="50um2/s" degradation-rate="0.01/s" color="green"  saturation="5nM" />
        <signal name="RFP" diffusion-rate="50um2/s" degradation-rate="0.01/s" color="red"    saturation="5nM" />
    </module>

    <program name="p1" language="stochastic-reactions-intercellular">
<![CDATA[
        null > 50 > env_GFP;
        if env_RFP > T: null > 50 > YFP;
]]>
    </program>

    <program name="p2" language="stochastic-reactions-intercellular">
<![CDATA[
        null > 50 > env_RFP;
        if env_GFP > T: null > 50 > CFP;
]]>
    </program>

    <!-- Generate yeast cells -->
    <module name="object-generator">
        <object class="cell.Yeast" probability="0.1" programs="p1" velocity="50um/s 0" position-min="-320um -150um" position-max="-320um -100um" />
        <object class="cell.Yeast" probability="0.1" programs="p2" velocity="50um/s 0" position-min="-320um -150um" position-max="-320um -100um" />
    </module>

</simulation>
